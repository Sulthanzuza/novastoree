<head>
  <link rel="stylesheet" href="/addprodd.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <title>{{title}}</title>
</head>
{{>dashp}}

<div class="products-containers">
  <div class="layout-wrappers" style="height: 115vh;">
    <main class="main-contents">
      <header class="headers">
        <nav class="breadcrumb" aria-label="Breadcrumb">
          <span class="breadcrumb-text">Admin</span>
          <img
            src="https://cdn.builder.io/api/v1/image/assets/TEMP/347fc193d0088dca0695d99147b3700ee95d8efb9ecfa3c2f8ce353113eebee3?placeholderIfAbsent=true&apiKey=d7cebeeadab64378ab4fc611373387df"
            alt="" />
          <span class="breadcrumb-text">Categories</span>
          <img
            src="https://cdn.builder.io/api/v1/image/assets/TEMP/347fc193d0088dca0695d99147b3700ee95d8efb9ecfa3c2f8ce353113eebee3?placeholderIfAbsent=true&apiKey=d7cebeeadab64378ab4fc611373387df"
            alt="" />
          <span class="breadcrumb-text breadcrumb-active">Add Categories</span>
        </nav>
        <a class="logout-buttons" aria-label="Logout" href="/admin/logout">
          <img
            src="https://cdn.builder.io/api/v1/image/assets/TEMP/434f453e4cc985013ba5977dc6c3ec92bd5cb52d93cf0e330a3970e94bfbd360?placeholderIfAbsent=true&apiKey=d7cebeeadab64378ab4fc611373387df"
            alt="" />
        </a>
      </header>

      <div class="container" style="margin-left: 16%; margin-top: -1%;">
        <section class="bgcolor" style="width:97%">
          <div class="row d-flex justify-content-between">
            <div class="col-md-12">
              <div class="row">
                <div class="containerboxcat mt-4 p-4">
                  <form class="p-4 pe-5 bg-white" id="categoryForm" style="margin: auto;" enctype="multipart/form-data">
                    <!-- Category Name -->
                    <div class="mb-3">
                      <label for="categoryName" class="form-label fw-bold">Category Name</label>
                      <input type="text" id="categoryName" name="name" class="form-control catinput"
                        placeholder="Type here" style="width:80%" required />
                      <div class="invalid-feedback">Category name is required.</div>
                    </div>

                    <!-- Description -->
                    <div class="mb-3">
                      <label for="description" class="form-label fw-bold">Description</label>
                      <textarea id="description" name="description" class="form-control catinput" rows="5"
                        placeholder="Type here" style="width:80%" required></textarea>
                      <div class="invalid-feedback">Description is required.</div>
                    </div>

                    <!-- Category Icon -->
                    <div class="mb-3">
                      <label for="categoryIcon" class="form-label fw-bold">Category Icon</label>
                      <div class="input-group">
                        <input type="file" id="categoryIcon" name="icon" class="form-control visually-hidden"
                          accept="image/*" required />
                        <button type="button" class="btn btn-outline-secondary" style="width:50%"
                          onclick="document.getElementById('categoryIcon').click()">Choose File</button>
                        <p id="fileName">No file chosen</p>
                      </div>
                      <div class="invalid-feedback">Please select a valid image file.</div>
                    </div>

                    <!-- Image Preview Container -->
                    <div id="imagePreviewContainer" style="display:none;">
                      <img id="imagePreview" src="" alt="Category Icon"
                        style="max-width: 100px; max-height: 100px; display: inline-block;" />
                      <button type="button" class="btn btn-danger" id="removeIcon"
                        style="display: inline-block; margin-left: 10px;">X</button>
                    </div>
                    <div class="mb-3">
                      <div class="form-field">
                        <label for="offer" class="field-label">Offer</label>
                        <select name="offers" id="offer" class="field-input">
                          <option value="">No Offer</option>
                          {{#each offers}}
                          <option value="{{this._id}}">{{this.name}} - {{this.discount}}%</option>
                          {{/each}}
                        </select>
                        <span class="form-error" id="offer-error"></span>
                      </div>
                    </div>


                    <!-- Form Actions -->
                    <div class="d-flex justify-content-center gap-3 pt-4">
                      <button type="button" class="btn btn-outline-secondary" onclick="resetForm()">Cancel</button>
                      <button type="submit" class="btn btn-dark">Add Category</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/js/addCategory.js"></script>