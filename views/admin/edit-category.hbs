<head><link rel="stylesheet" href="/addprodd.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<title>{{title}}</title>
</head>
{{>dashp}}

<div class="products-containers">
  <div class="layout-wrappers" style="height: 123vh;">
    <main class="main-contents" style="width:87%"> 
      <header class="headers" style="width:106%">
        <nav class="breadcrumb" aria-label="Breadcrumb">
          <span class="breadcrumb-text">Admin</span>
          <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/347fc193d0088dca0695d99147b3700ee95d8efb9ecfa3c2f8ce353113eebee3?placeholderIfAbsent=true&apiKey=d7cebeeadab64378ab4fc611373387df"
               alt="" />
          <span class="breadcrumb-text">Categories</span>
           <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/347fc193d0088dca0695d99147b3700ee95d8efb9ecfa3c2f8ce353113eebee3?placeholderIfAbsent=true&apiKey=d7cebeeadab64378ab4fc611373387df"
               alt="" />
          <span class="breadcrumb-text breadcrumb-active">Edit Categories</span>
        </nav>
        <a class="logout-buttons" aria-label="Logout" href="/admin/logout">
          <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/434f453e4cc985013ba5977dc6c3ec92bd5cb52d93cf0e330a3970e94bfbd360?placeholderIfAbsent=true&apiKey=d7cebeeadab64378ab4fc611373387df"
               alt="" />
        </a>
      </header>

    <div class="container" style="margin-left: 18%; margin-top: -1%;">
    <section class="bgcolor" style="width:97%">
        <div class="row d-flex justify-content-between">
            <div class="col-md-12">
                <div class="row">
                    <div class="containerboxcat mt-4 p-4">
                        <form class="p-4 pe-5 bg-white" id="editCategoryForm" data-categoryId="{{category._id}}" enctype="multipart/form-data">
                            <h3 class=" text-center mb-4">Edit Category</h3>

                            <div class="mb-3">
                                <label for="categoryName" class="form-label fw-bold">Category Name</label>
                                <input type="text" id="categoryName" name="name" value="{{category.name}}" class="form-control catinput"
                                    placeholder="Type here" style="width:80%" required />
                            </div>

                            <div class="mb-3">
                                <label for="description" class="form-label fw-bold">Description</label>
                                <textarea id="description" name="description" class="form-control catinput" rows="5" required>{{category.description}}</textarea>

                            </div>

                            <div class="mb-3">
    <label for="categoryIcon" class="form-label fw-bold">Category Icon</label>
    
 
    
    <!-- File input for new icon -->
    <input type="file" id="categoryIcon" name="icon" class="form-control" accept="image/*" onchange="previewImage()" />
</div>
   <!-- Preview existing icon -->
  <div id="imagePreviewContainer" >
    <img id="imagePreview" src="/uploads/{{category.icon}}" alt="Current Category Icon" style="max-width: 60px; max-height: 60px; margin-bottom: 10px;"/>
</div><div class="mb-3">
                       <div class="form-field">
  <label for="offer" class="field-label">Offer</label>
  <select name="offers" id="offer" class="field-input">
    <option value="">No Offer</option>
    {{#each offers}}
      <option value="{{this._id}}" 
        {{#if (eq this._id ../category.offers)}}selected{{/if}}>
        {{this.name}}
      </option>
    {{/each}}
  </select>

  <span class="form-error" id="offer-error"></span>
</div>

                      </div>



                            <div class="d-flex justify-content-center gap-3 pt-4">
                                <a href="/admin/category" class="btn btn-outline-secondary">Cancel</a>
                                <button type="submit" class="btn btn-dark">Update Category</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

    </main>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/js/editCategory.js"></script>



